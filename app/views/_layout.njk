{% from "components/super-header-macro.njk" import superHeader %}
{% from "govuk/components/footer/macro.njk" import govukFooter %}

{% extends "govuk/template.njk" %}

{% block head %}
  <link href="static/css/app.css" rel="stylesheet">
{% endblock %}

{% block pageTitle %}Check what SFI actions you can get paid to do on your land{% endblock %}

{% block bodyStart %}
  {% if not cookiesPolicy.confirmed %}
    {% include 'components/cookie-banner.njk' %}
  {% endif %}
{% endblock %}

{% block beforeContent %}
  {% include 'components/breadcrumbs.njk' %}
{% endblock %}

{% block header %}
  {{ superHeader({
        homepageUrl: "/",
        navigation: [
            {
                "text": "enabled"
            }
        ]
    }) }}
  <div class="gem-c-layout-for-public__blue-bar govuk-width-container"></div>
{% endblock %}

{% block bodyEnd %}
  {# Run JavaScript at end of the <body>, to avoid blocking the initial render. #}
  <script src="static/js/entry.js"></script>
  {% if cookiesPolicy.analytics %}
    {% include 'components/tag-manager.njk' %}
  {% endif %}

  <script>
    document.addEventListener("DOMContentLoaded", function (event) {
      var menuButton = document.getElementById("menuButton");
      var superNavMenu = document.getElementById("super-navigation-menu");

      var menuLink = document.getElementById("menuLink");
      var jsMenuButton = document.getElementById("jsMenuButton");

      // Search
      var searchButton = document.getElementById("super-search-menu-toggle");
      var nonJsSearchButton = document.getElementById("searchButton");
      var superSearchMenu = document.getElementById("super-search-menu");

      menuLink
        .classList
        .add("govuk-!-display-none");
      jsMenuButton
        .classList
        .remove("govuk-!-display-none");
      nonJsSearchButton.classList.add("govuk-!-display-none")
      searchButton.classList.remove("govuk-!-display-none");

      function openNavMenu() {
        superNavMenu.removeAttribute("hidden");

        jsMenuButton
          .classList
          .add("active");
      }

      function closeNavMenu() {
        superNavMenu.setAttribute("hidden", "hidden");

        jsMenuButton
          .classList
          .remove("active");
      }

      function openSearchMenu() {
        superSearchMenu.removeAttribute("hidden");

        searchButton
          .classList
          .add("active");
      }

      function closeSearchMenu() {
        superSearchMenu.setAttribute("hidden", "hidden");

        searchButton
          .classList
          .remove("active");
      }

      jsMenuButton.addEventListener("click", function (event) {
        if (jsMenuButton.classList.contains("active")) {
          closeNavMenu();
        } else {
          openNavMenu();
          closeSearchMenu();
        }
      });

      searchButton.addEventListener("click", function (event) {
        if (searchButton.classList.contains("active")) {
          closeSearchMenu();
        } else {
          openSearchMenu();
          closeNavMenu();
        }
      });
    });
  </script>
{% endblock %}

{% block footer %}
  {% include 'components/footer.njk' %}
{% endblock %}